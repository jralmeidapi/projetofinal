{% extends 'base.html' %}

{% load widget_tweaks %}

{% block titulo %}

Lista/Cadastra Pessoas | {{ block.super }}

{% endblock titulo %}

{% block corpo %}

<h1> Adicionar uma Nova Pessoa </h1>
<form action="" method="post">
{% csrf_token %}
    <div class="form-group">
        <label for="{{ form.nome.id_for_label }}">{{ form.nome.label }}</label>
        {% render_field form.nome class="form-control" %}
    </div>
    <div class="form-group">
        <label for="{{ form.nascimento.id_for_label }}">{{ form.nascimento.label }}</label>
        {% render_field form.nascimento class="form-control" %}
    </div>
    <div class="form-group">
        <label for="{{ form.cpf.id_for_label }}">{{ form.cpf.label }}</label>
        {% render_field form.cpf class="form-control" %}
    </div>
    <button type="submit" class="btn btn-primary"> Cadastrar </button>
</form>

<h1>Lista de Credores/Devedores</h1>

<table class="table table-hover">
    <thead>
        <tr>
            <th scope="col">Código</th>
            <th scope="col">Nome</th>
            <th scope="col">Nascimento</th>
            <th scope="col">CPF</th>
            <th scope="col">Ações</th>
        </tr>
    </thead>
    <tbody>
        {% for pessoa in pessoas %}
        <tr>
            <th scope="row">{{ pessoa.id}}</th>
            <td>{{ pessoa.nome}}</td>
            <td>{{ pessoa.nascimento}}</td>
            <td>{{ pessoa.cpf}}</td>
            <td colspan="2">
                <a href="{% url 'gestor:editar_pessoa' pessoa.id %}" class="btn btn-primary btn-sm">Editar</a>
                <a href="{% url 'gestor:deletar_pessoa' pessoa.id %}"class="btn btn-danger btn-sm">Deletar</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<span>Total de Contas a Pagar: R$ {{total}}</span>
{% endblock corpo %}